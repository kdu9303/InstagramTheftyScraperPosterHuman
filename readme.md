### Updated README for Instagram Thefty Scraper Poster Human

# Instagram Thefty Scraper Poster Human

Instagram Thefty Scraper Poster Human builds upon the features of its predecessor, introducing several enhancements and new functionalities to improve the automation process of scraping, uploading, and managing Instagram reels.

## Features

### Previous Features

- **Scraping Reels**: Scrapes reels from specified Instagram profiles.
- **Uploading Reels**: Uploads scraped reels to your Instagram account.
- **Customizable Descriptions**: Allows for customizable descriptions for uploaded reels.
- **Adding to Stories**: Optionally adds uploaded reels to your Instagram story.
- **Interval-based Tasks**: Performs scraping and uploading tasks at specified intervals.
- **Encrypted Credentials**: Securely stores Instagram credentials using encryption.

### New Features

- **Enhanced Random Waits**: Added random waits between scraping, liking, commenting, and uploading actions to better simulate human behavior and reduce the risk of detection by Instagram.
- **Logging of Random Waits**: Logs random wait times into a separate file (`random-waits.json`) for better tracking and debugging.
- **Detailed Logging of Comments**: Logs the actual comments posted on each reel for better traceability.
- **Improved Error Handling**: Enhanced error handling and logging to capture JSONDecodeError and other exceptions, making the script more robust.
- **Improved Dashboard**: Updated dashboard to display detailed information about scraping, uploading, and random wait times, as well as the next file to be uploaded.

## Requirements

- Python 3.6+
- Required Python packages (specified in `requirements.txt`)

### Install Required Packages

You can install all the required packages using the following command:

```bash
pip install -r requirements.txt
```

## Installation

1. Clone the repository:
   ```bash
   git clone https://github.com/sujay1599/InstgramTheftyScraperPosterHuman.git
   cd InstgramTheftyScraperPosterHuman
   ```

2. Install the required packages using `requirements.txt`:
   ```bash
   pip install -r requirements.txt
   ```

3. Run `config_setup.py` to create the `config.yaml` file:
   ```bash
   python config_setup.py
   ```
   Follow the prompts to enter your configuration details. This will generate a `config.yaml` file with the necessary settings, including encrypted Instagram credentials.

### Configuration

The `config.yaml` file will be generated by running `config_setup.py`. It includes the following settings:

```yaml
instagram:
  username: ENCRYPTED_USERNAME
  password: ENCRYPTED_PASSWORD
key: ENCRYPTION_KEY
scraping:
  enabled: true
  profiles: profile1 profile2
  num_reels: 10
  scrape_interval_minutes: 60
  like_reels: true
uploading:
  enabled: true
  upload_interval_minutes: 30
  add_to_story: true
description:
  use_original: true
  custom_description: "This is a custom description if the original is not used."
hashtags:
  use_hashtags: true
  hashtags_list: "#example #hashtags"
credit:
  give_credit: true
leave_comment: true
comments:
  - "Nice reel!"
  - "Great post!"
deleting:
  delete_interval_minutes: 1440
custom_tags: "tag1 tag2"
```

### Configuration Details

- **Instagram Credentials**: Provide your Instagram username and password. These will be encrypted and stored securely.
- **Scraping Settings**:
  - `enabled`: Set to `true` to enable scraping.
  - `profiles`: Space-separated list of Instagram profiles to scrape reels from.
  - `num_reels`: Number of reels to scrape per profile.
  - `scrape_interval_minutes`: Interval in minutes between scraping sessions.
  - `like_reels`: Set to `true` to like the scraped reels automatically.
- **Uploading Settings**:
  - `enabled`: Set to `true` to enable uploading.
  - `upload_interval_minutes`: Interval in minutes between uploads.
  - `add_to_story`: Set to `true` to add reels to your Instagram story.
- **Description Settings**:
  - `use_original`: Set to `true` to use the original reel description. If `false`, you will be prompted to enter a custom description. If the description of a scraped reel is blank, one of the default descriptions will be used.
  - `custom_description`: The custom description to use if `use_original` is `false`.
- **Hashtags Settings**:
  - `use_hashtags`: Set to `true` to use hashtags in the reel descriptions.
  - `hashtags_list`: List of hashtags to include in the reel descriptions (if `use_hashtags` is `true`).
- **Credit Settings**:
  - `give_credit`: Set to `true` to give credit to the original poster in the reel descriptions.
- **Commenting Settings**:
  - `leave_comment`: Set to `true` to leave comments on scraped reels.
  - `comments`: Comma-separated list of comments to leave on scraped reels if `leave_comment` is `true`. Leave blank if no comments should be left.
- **Deleting Settings**:
  - `delete_interval_minutes`: Interval in minutes between deletions of old reels from your Instagram account.

## Usage

To run the program, follow the steps below:

1. Ensure you have completed the setup as outlined in the "Installation" section.

2. Run the `main.py` script:

```bash
python main.py
```

This script performs the following tasks:

1. **Initialization**:
    - Creates the necessary directories and files if they don't exist.
    - Loads the configuration from the `config.yaml` file.
    - Decrypts Instagram credentials.
    - Logs into Instagram using the `instagrapi` client.

2. **Main Loop**:
    - The script continuously runs, performing tasks at specified intervals.
    - **Scraping**: Scrapes reels from specified Instagram profiles at intervals defined in the configuration.
    - **Uploading**: Uploads scraped reels to your Instagram account at intervals defined in the configuration.
    - **Human-like Actions**: Randomly performs human-like actions such as liking posts to mimic natural user behavior.

### Script Overview

#### `main.py`

- **Initialization**:
    - Creates directories and initializes files.
    - Loads configuration and decrypts Instagram credentials.
    - Logs into Instagram using `instagrapi`.

- **Main Loop**:
    - **Scraping**: Scrapes reels from specified profiles at intervals. Updates the status file after each scrape.
    - **Uploading**: Uploads unuploaded reels to Instagram at intervals. Updates the status file after each upload.
    - **Human-like Actions**: Performs random human-like actions such as liking posts during waiting periods.

#### `auth.py`

- **decrypt_credentials**: Decrypts the encrypted Instagram username and password.
- **login**: Attempts to log in using a session file. If unsuccessful, logs in with the provided username and password and creates a session file.

#### `scraper.py`

- **perform_human_actions**: Randomly performs human-like actions on Instagram tags.
- **scrape_reels**: Scrapes reels from specified profiles. Saves each reel and its description. Updates the status file after each successful scrape.

#### `upload.py`

- **sleep_with_progress_bar**: Displays a progress bar during sleep intervals to provide visual feedback.
- **build_description**: Constructs the description for uploaded reels, using either the original or custom description, with optional hashtags and credit.
- **load_uploaded_reels**: Loads the list of previously uploaded reels from a log file.
- **upload_reels_with_new_descriptions**: Uploads reels to Instagram, applying new descriptions if necessary. Updates the status file and logs the uploads.
- **get_unuploaded_reels**: Retrieves the list of reels that have been scraped but not yet uploaded.

#### `utils.py`

- **random_sleep**: Sleeps for a random duration and logs the sleep time.
- **log_random_waits**: Logs random wait times to a file.
- **log_random_upload_times**: Logs random upload times to a file.
- **initialize_json_file**: Ensures a JSON file exists, initializing it if necessary.
- **update_status**: Updates the status file with various task timestamps and other status information.
- **read_status**: Reads the status file and returns the current status.
- **initialize_status_file**: Initializes the status file with default values if it does not exist.

### Logging and Debugging

The script maintains several log files to track activities and help debug issues:

- **upload_log.txt**: Keeps track of uploaded reels.
- **status.json**: Tracks the last action times and other status information.
- **random-upload-times.json**: Logs the random sleep times between uploads.
- **random-waits.json**: Logs the random wait times between various actions.

### Viewing the Dashboard

To get a detailed view of scraping and uploading activities, you can run the dashboard script:

```bash
python dashboard.py
```

This will display a comprehensive dashboard showing the status of scraping, uploading, and random wait times.

### Error Handling

Common issues and their solutions:

1. **JSONDecodeError**: Ensure the profiles and other configuration details are correct. This error usually occurs when the response from Instagram is not as expected.
2. **Feedback Required**: Instagram may require additional verification. Log in to your Instagram account manually and check for any prompts.
3. **File Not Found**: Ensure the `downloads` directory exists and has the necessary permissions.

By following the configuration details and usage instructions, you can efficiently manage your Instagram scraping and uploading tasks using this program.